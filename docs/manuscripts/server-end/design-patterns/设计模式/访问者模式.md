---
title: 访问者模式
permalink: /manuscripts/server-end/design-patterns/visitor-mode.html
---

# 访问者模式

访问者模式`Visitor Pattern`
中属于行为型模式，针对于对象结构中的元素，定义在不改变该对象的前提下访问结构中元素的新方法，元素的执行算法可以随着访问者改变而改变，主要意图在于将数据结构与数据操作分离，解决稳定的数据结构和易变的操作耦合问题。

## 基本介绍

在面向对象编程和软件工程中，访问者设计模式是一种将算法与它所运行的对象结构分离的方法，这种分离的实际结果是能够在不修改现有对象结构的情况下向现有对象结构添加新操作，这是遵循开放封闭原则的一种方式。

### 优点

-

符合单一职责原则，凡是适用访问者模式的场景中，元素类中需要封装在访问者中的操作必定是与元素类本身关系不大且是易变的操作，使用访问者模式一方面符合单一职责原则，另一方面，因为被封装的操作通常来说都是易变的，所以当发生变化时，就可以在不改变元素类本身的前提下，实现对变化部分的扩展。

- 扩展性良好，元素类可以通过接受不同的访问者来实现对不同操作的扩展。

### 缺点

- 具体元素对访问者公布细节，违反了迪米特原则。
- 具体元素变更比较困难。
- 违反了依赖倒置原则，依赖了具体类，没有依赖抽象。

### 适用环境

- 假如一个对象中存在着一些与本对象不相干(或者关系较弱)的操作，为了避免这些操作污染这个对象，则可以使用访问者模式来把这些操作封装到访问者中去。
- 假如一组对象中，存在着相似的操作，为了避免出现大量重复的代码，也可以将这些重复的操作封装到访问者中去。

## 代码实现
