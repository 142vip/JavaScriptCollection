---
title: 里氏替换原则
permalink: /manuscripts/server-end/design-patterns/liskov-substitution-principle.html
headerDepth: 0
---

# 里氏替换原则

`里氏替换原则`要求子类必须能够替换其基类，而不影响程序的正确性。换句话说，任何基类可以被其派生类无缝替换，而不会引发意外行为。
遵循该原则可以提高代码的可靠性和可扩展性。

**强调子类对象必须能够替换父类对象，而程序的行为不应该发生变化**。简而言之，子类对象在任何使用父类对象的地方都应该能够正常工作，而不会引发错误或不一致的行为。

## 举例说明

这里通过一个例子对`迪米特法则`进行说明。例如：

有两个类：`Rectangle` 和 `Square`。

- `Rectangle` 类表示矩形，具有 `width` 和 `height` 两个受保护的属性，以及设置宽度和高度的方法 `setWidth` 和 `setHeight`
  。还有一个计算面积的方法 `getArea`。
- `Square` 类继承自 `Rectangle` 类，表示正方形。它重写了 `setWidth` 和 `setHeight` 方法，使得设置宽度和高度时保持相等。

定义一个 `printArea` 函数，用于打印矩形的面积。这个函数接受一个 `Rectangle` 对象作为参数，并设置宽度为 4，高度为 5，然后打印面积。

创建一个 `Rectangle` 对象和一个 `Square` 对象，并分别将它们传递给 `printArea` 函数进行测试。

这里体现了`里氏替换原则`的思想。根据`里氏替换原则`，子类对象（如 `Square`）可以替换父类对象（如 `Rectangle`
）在任何使用父类对象的地方，而不会引发错误或不一致的行为。

`printArea` 函数接受一个 `Rectangle` 对象作为参数，可以正常地将 `Square` 对象传递给该函数，而不会引发错误。
尽管 `Square` 对象的行为略有不同（设置宽度和高度时保持相等），但仍然能够正确计算面积，并且满足父类对象的行为约定。

@[code ts](@code/design-patterns/lsp-demo.ts)

`里氏替换原则`的核心思想是通过子类对象的可替换性来保证程序的正确性和稳定性。

**子类应该能够完全替换父类，并且在任何使用父类的地方都能够正常工作**。这样可以提高代码的可复用性和扩展性，增强系统的灵活性和可维护性。
